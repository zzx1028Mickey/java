# Java

## 01 Java编程语言概述

### 计算机语言介绍

计算机语言：人与计算机交流的方式。

- **第一代语言：机器语言**

  指令以二进制代码形式存在。

- **第二代语言：汇编语言**

  使用助记符表示一条机器指令。

- **第三代语言：高级语言**

  > C、Pascal、Fortran 面向过程的语言
  >
  > C++ 面向过程/面向对象
  >
  > **Java跨平台的纯面向对象的语言**
  >
  > .NET跨平台语言
  >
  > Python、Scala...







### Java语言概述

- 是**SUN(Stanford University Network，斯坦福大学网络公司) 1995年**推出的一门高级编程语言。
- 是一种面向 Internet 的编程语言。Java 一开始富有吸引力是因为 Java 程序可以在Web浏览器中运行。这些 Java 程序被称为 Java 小程序（applet）。applet 使用现代的图形用户界面与 Web 用户进行交互。 applet内嵌在HTML 代码中。
- 随着 Java 技术在 web 方面的不断成熟，已经成为 Web 应用程序的首选开发语言。



> 1996年，发布JDK 1.0，约8.3万个网页应用 Java 技术来制作。
>
> 2004年，发布里程碑式版本：JDK 1.5，为突出此版本的重要性，更名为JDK 5.0。
>
> 2014年，发布JDK 8.0，是继JDK 5.0以来变化最大的版本。







### Java 技术体系平台

**Java SE(Java Standard Edition)标准版**

支持面向桌面级应用（如 Windows 下的应用程序）的 Java 平台，提供了完整的 Java 核心 API，此版本以前成为 J2SE。

**Java EE(Java Enterprise Edition)企业版**

是为开发企业环境下的应用程序提供的一套解决方案。该技术体系中包含的技术如：Servlet、Jsp 等，主要针对于 Web 应用程序开发。版本以前称为 J2EE。

**Java ME(Java Micro Edition)小型版**

支持 Java 程序运行在移动终端（手机、pad）上的平台，对 Java API 有所精简，并加入了针对移动终端的支持，此版本以前称为 J2ME。

**Java Card**

支持一些 Java 小程序（Applets）运行在小内存设备（如智能卡）上的平台。







### Java 核心机制与 JVM 运行原理

#### Java 语言的特点

- **面向对象**

  两个基本概念：类、对象

  三大特性：封装、继承、多态

- **健壮性**

  吸收了C/C++语言的优点，但去掉了其影响程序健壮性的部分（如指针、内存的申请与释放等），提供了一个相对安全的内存管理和访问机制。

- **跨平台性**

  通过 Java 语言编写的应用程序在不同的系统平台上都可以运行。**"Write once,Run Anywhere"**

  原理：只要在需要运行 Java 应用程序的操作系统上，先安装一个 Java 虚拟机(JVM Java Virtual Machine)即可。由 JVM 来负责 Java 程序在该系统中的运行。



#### Java 语言核心机制

**Java 虚拟机**

- ***JVM 是一个虚拟的计算机，具有指令集并使用不同的存储区域。负责执行指令，管理数据、内存、寄存器。***
- 对于不同的平台，有不同的虚拟机。
- 只有某平台提供了对应的 Java 虚拟机， Java 程序才可在此平台运行。
- Java 虚拟机机制屏蔽了底层运行平台的差别，实现了”一次编译，处处运行“。

**垃圾回收**

- 不再使用的内存空间应回收——垃圾回收。

  在C\C++等语言中，由程序员负责回收无用内存。

  Java 语言消除了程序员回收无用内存空间的责任：它提供一种系统级线程跟踪存储空间的分配情况。并在 JVM 空闲时，检查并释放那些可被释放的存储空间。

- 垃圾回收在 Java 程序运行过程中自动进行，程序员无法精确控制和干预。

- ***Java程序还会出现内存泄漏和内存溢出问题吗？Yes***







### 搭建 Java 开发环境

**JDK(Java Development Kit  Java 开发工具包)** = JRE + 开发工具集（例如 Javac 编译工具等）

**JRE(Java Runtime Environment  Java 运行环境) **  = JVM + JavaSE 标准类库

#### 下载并安装 JDK

- 官方网址

  www.oracle.com
  java.sun.com

- 安装 JDK

  傻瓜式安装，下一步即可。
  建议：安装路径不要有中文或者空格等特殊符号。
  如果操作系统是64位的，软件尽量选择支持64位的（除非软件本身不区分）。
  当提示安装 JRE 时，正常在JDK安装时已经装过了，但是为了后续使用Eclipse等开发 工具不报错，建议也根据提示安装JRE。

#### 配置环境变量

- 我的电脑--属性--高级系统设置--环境变量 

- 新建 JAVA_HOME 系统变量，存放jdk安装路径

- 新建CLASSPATH 系统变量

  **.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;**

- 编辑 path 环境变量，在变量值开始处加上

  **%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;**

- 打开DOS命令行，任意目录下敲入javac。如果出现javac 的参数信息，配置成功。







### 开发第一个 Java 应用程序

**新建**

新建文本文档，命名为Test

打开输入代码

public class Test(){

​	public static void mian(String[] args){

​		System.out.println("Hello World!");

​	}

}

保存并关闭，修改文件后缀为 .java

运行cmd，进入Test.java所在路径

javac Test.java

.java 源文件通过javac编译成 JVM 可识别的字节码文件，同目录下出现同名.class文件

控制台执行java Test 运行.class文件

显示 Hello World!







### Java 程序的执行原理

将用java语言编写的程序（即源代码.java文件）经过java编译器处理编译成字节码文件（.class文件）

这个字节码文件可在任意一个平台的不同java虚拟机（jvm）上屏蔽平台差异而运行。

在jvm中，程序首先被类装载器处理加载类文件，然后进入字节码校验器检查代码的语法规范性以及安全性，接着进入解释器把抽象的字节码指令映射到本地系统平台下的库引用或指令，最后到操作系统平台运行。







### Java Code Style

自定义类名、接口名与对象名应该是名词与名词短语。遵守驼峰命名规则，所有单词首字母大写。如Customer、WikiPage、Account和AddressParser。避免使用Data或Info这样的类名。不能使动词。比如：Manage、Process。

方法名应当是动词或者动词短语。如postPayment、deletePage或save。

自定义方法名与变量名，首单词小写，后续拼接单词首字母大写。

自定义常量名全部大写，单词间使用下划线连接，如MAX_CLASSES_PER_STUDENT







### 变量的声明和使用

- **变量的概念**

  内存中的一个存储区域，该区域的数据可以在同一类型范围内不断变化。

  变量是程序中最基本的存储单元。包括**变量类型、变量名和存储的值**。

  在方法体外，类体内声明的变量称为成员变量。

  在方法体内声明的变量称为局部变量。

- **变量的作用**

  用于在内存中保存数据

- **使用变量注意事项**

  Java 中每个变量必须先声明，后使用

  使用变量名来访问这块区域的数据

  变量的作用域：其定义所在的一对 {} 内

  变量只有在其作用域内才有效

  同一个作用域内，不能定义重名的变量

- **声明变量**

  语法：<数据类型> <变量名>

  例如：int var;

- **变量的赋值**

  语法：<变量名> = <值>

  例如：var = 10;

- **声明和赋值变量**

  语法：<数据类型> <变量名> = <初始化值>

  例如：int var = 10;







### 变量内存空间分配与原理

1. 寄存器：最快的存储区, 由编译器根据需求进行分配,我们在程序中无法控制.
2. 栈：存放基本类型的变量数据和对象的引用，但对象本身不存放在栈中，而是存放在堆（new 出来的对象）或者常量池中（字符串常量对象存放在常量池中。）
3. 堆：存放所有new出来的对象。
4.  静态域：存放静态成员（static定义的）
5. 常量池：存放字符串常量和基本类型常量（public static final）。
6. 非RAM存储：硬盘等永久存储空间







### 进制与位运算

#### 进制的组成

2进制	0,1 ，满2进1  以0b或0B开头　             如:010101
8进制	0-7 ，满8进1  以数字0开头表示　　    如:012345
10进制  0-9 ，满10进1   　　                              如:100
16进制  0-9及A-F，满16进1. 以0x或0X开头表示   如:0x12c

#### 进制的转换

- **十进制转二进制**
  方法为：十进制数除2取余法，即十进制数除2，余数为权位上的数，得到的商值继续除2，依此步骤继续向下运算直到商为0为止。

- **二进制转十进制**

  方法为：把二进制数按权展开、相加即得十进制数。

- **二进制转八进制**

  方法为：3位二进制数按权展开相加得到1位八进制数。（注意事项，3位二进制转成八进制是从右到左开始转换，不足时补0）。

- **八进制转成二进制**

  方法为：八进制数通过除2取余法，得到二进制数，对每个八进制为3个二进制，不足时在最左边补零。

- **二进制转十六进制**

  方法为：与二进制转八进制方法近似，八进制是取三合一，十六进制是取四合一。（注意事项，4位二进制转成十六进制是从右到左开始转换，不足时补0）

- **十六进制转二进制**

  方法为：十六进制数通过除2取余法，得到二进制数，对每个十六进制为4个二进制，不足时在最左边补零。







### 变量的数据类型

![](C:\Users\张子翔\Desktop\数据类型.png)

#### 基本数据类型

##### 整数类型

- Java 各整数类型有固定的表数范围和字段长度，不受具体OS的影响，以保证 Java 程序的可移植性。
- Java 的整型常量默认为 int 型，声明 long 型常量须后加 "l" 或 "L" 
- Java 程序中整型变量通常声明为 int 型，除非不足以表示较大的数，才使用 long

![](C:\Users\张子翔\Desktop\整型长度.png)



##### 浮点类型

- 与整数类型类似，Java 浮点类型也有固定的表数范围和字段长度，不受具体操作 系统的影响。

- 浮点型常量有两种表示形式：

   十进制数形式：如：5.12       512.0f        .512   (必须有小数点） 

  科学计数法形式:如：5.12e2      512E2     100E-2

- float: 单精度，尾数可以精确到7位有效数字。很多情况下，精度很难满足需求。 

  double: 双精度，精度是float的两倍。通常采用此类型。

- Java 的浮点型常量默认为double型，声明float型常量，须后加‘f’或‘F’。 

![](C:\Users\张子翔\Desktop\浮点型长度.png)



##### 字符类型

- char 型数据用来表示通常意义上“字符”(2字节) 

- Java 中的所有字符都使用Unicode编码，故一个字符可以存储一个字母，一个汉字，或其他书面语的一个字符。 

- 字符型变量的三种表现形式： 

  1. 字符常量是用单引号(‘ ’)括起来的单个字符。例如：char c1 = 'a';   char c2 = '中'; char c3 =  '9'; 

  2. Java中还允许使用转义字符‘\’来将其后的字符转变为特殊字符型常量。 例如：char c3 = ‘\n’;  // '\n'表示换行符 

  3. 直接使用 Unicode 值来表示字符型常量：‘\uXXXX’。其中，XXXX代表 一个十六进制整数。如：\u000a 表示 \n。 

- char类型是可以进行运算的。因为它都对应有Unicode码。



##### 布尔类型

- boolean 类型用来判断逻辑条件，一般用于程序流程控制： if条件控制语句；
  while循环控制语句；
  do-while循环控制语句；
  for循环控制语句； 

- boolean类型数据只允许取值true和false，无null。 

  不可以使用 0 或非 0 的整数替代false和true，这点和C语言不同。
  Java虚拟机中没有任何供boolean值专用的字节码指令，Java语言表达所操作的 boolean值，在编译之后都使用java虚拟机中的int数据类型来代替：true用1表示，false 用0表示。———《java虚拟机规范 8版》







### 数据类型之间的转换

#### 基本数据类型转换

- 自动类型转换：容量小的类型自动转换为容量大的数据类型。数据类型按容 量大小排序为：

  ![](C:\Users\张子翔\Desktop\数据类型容量排序.png)

- 有多种类型的数据混合运算时，系统首先自动将所有数据转换成容量最大的 那种数据类型，然后再进行计算。

- byte,short,char之间不会相互转换，他们三者在计算时首先转换为int类型。 

- boolean类型不能与其它数据类型运算。 

- 当把任何基本数据类型的值和字符串(String)进行连接运算时(+)，基本数据类 型的值将自动转化为字符串(String)类型。



#### 强制类型转换

- 自动类型转换的逆过程，将容量大的数据类型转换为容量小的数据类型。使 用时要加上强制转换符：()，但可能造成精度降低或溢出,格外要注意。

- 通常，字符串不能直接转换为基本类型，但通过基本类型对应的包装类则可以实现把字符串转换成基本类型。

  如： String a = “43”; int i = Integer.parseInt(a);







### 变量的运算与底层运算原理

#### 运算符

##### 算术运算符

![](C:\Users\张子翔\Desktop\算术运算符.png)

##### 赋值运算符

= ， += ， -= ，  *= ，  /= ，  %=

##### 关系运算符

![](C:\Users\张子翔\Desktop\关系运算符.png)

##### 逻辑运算符

&  逻辑与			|  逻辑或		 ！  逻辑非		

&&  短路与		||  短路或		^   逻辑异或

##### 位运算符

![](C:\Users\张子翔\Desktop\位运算符.png)

![](C:\Users\张子翔\Desktop\位运算符细节.png)

##### 三元运算符

**格式：**

(条件表达式)?表达式1：表达式2；

1. 表达式1和表达式2为同种类型
2. 条件表达式为true，运算后的结果是表达式1；
3. 条件表达式为false，运算后的结果是表达式2；

#### 运算符的优先级

- 运算符有不同的优先级，所谓 优先级 就是表达式运算中的运 算顺序。如下表，上一行运算符总优先于下一行。
- 只有单目运算符、三元运算符、 赋值运算符是从右向左运算的。

![](C:\Users\张子翔\Desktop\运算符的优先级.png)